{% block Navbar %}
<nav class="bg-white shadow-lg sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <div class="flex-shrink-0 flex items-center">
                        <i class="fas fa-shopping-bag text-indigo-600 text-2xl mr-2"></i>
                        <a class="text-xl font-bold text-indigo-600" href="{% url 'home' %}">ShopEase</a>
                    </div>
                    <div class="hidden md:ml-6 md:flex md:space-x-8">
                        <a href="{% url 'home' %}" class="{% if request.resolver_match.url_name == 'home' %}border-indigo-500 text-gray-900{% else %}border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700{% endif %} inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium">Home</a>
                        <div class="relative inline-block text-left group">
                            <button id="categoriesMenuButton" class="border-transparent text-gray-500 hover:text-gray-700 inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium">
                                Category
                                <i class="fas fa-chevron-down ml-1 text-xs"></i>
                            </button>
                            <div id="categoriesMenu" class="hidden group-hover:block absolute mt-2 w-48 bg-white rounded-lg shadow-xl py-2 z-50 border border-gray-200">
                                <a href="{% url 'shop' %}?type=EL" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 hover:text-indigo-600">Electronics</a>
                                <a href="{% url 'shop' %}?type=FS" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 hover:text-indigo-600">Fashion</a>
                                <a href="{% url 'shop' %}?type=HK" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 hover:text-indigo-600">Home &amp; Kitchen</a>
                                <a href="{% url 'shop' %}?type=ST" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 hover:text-indigo-600">Sports</a>
                                <a href="{% url 'shop' %}?type=OT" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 hover:text-indigo-600">Others</a>
                            </div>
                        </div>
                        <a href={% url "working" %} id="categoriesMenuButton" class="border-transparent text-gray-500 hover:text-gray-700 inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium">
                            Deals
                        </button>
                        <a href={% url "working" %} id="categoriesMenuButton" class="border-transparent text-gray-500 hover:text-gray-700 inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium">
                            What's New
                        </button>
                        <a href={% url "working" %} id="categoriesMenuButton" class="border-transparent text-gray-500 hover:text-gray-700 inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium">
                            Delivery
                        </button>
                        <div class="relative inline-block text-left group">
                            <a  href={%url "about"%}  class=" border-transparent text-gray-500 hover:text-gray-700 inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium">
                                About
                            </a>
                        </div>
                    </div>
                </div>
                
                {% if user.is_authenticated and user.is_staff %}
                <a class="btn btn-primary btn-sm normal-case shadow hover:shadow-md transition" href="{% url 'admin_dashboard' %}">
                    <i class="fas fa-tools "></i>
                    Admin Dashboard
                </a>
                {% endif %}
                <div class="flex items-center">

                    <div class="flex-1 flex items-center justify-center px-2 lg:ml-6 lg:justify-end">
                        <div class="max-w-lg w-full lg:max-w-xs">
                            <label for="Search Product" class="sr-only">Search</label>
                            <div class="relative">
                                <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                    <i class="fas fa-search text-gray-400"></i>
                                </div>
                                <input id="search" name="search" class="block w-full pl-10 pr-15 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-t-full rounded-b-full" placeholder="Search Product" type="search">
                            </div>
                        </div>
                    </div>
                    <div class="ml-3 flex items-center md:ml-5 space-x-2">
                        <button type="button" class="bg-white p-1 rounded-full text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 relative" id="cart-button">
                            <span class="sr-only">View cart</span>
                            <i class="fas fa-shopping-cart h-6 w-6"></i>
                            <span class="absolute -top-1 -right-1 bg-indigo-600 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center" id="cart-count">0</span>
                        </button>
                        <!-- User Menu -->
                    <div class="relative inline-block text-left">
                    <!-- Avatar button -->
                    <button id="userMenuButton" class="flex items-center focus:outline-none hover:opacity-80 transition-opacity duration-200">
                        {%if not user.is_authenticated%}
                        <img
                        class="h-10 w-10 rounded-full border-2 border-gray-200 hover:border-indigo-300 transition-colors duration-200"
                        src="https://www.citypng.com/public/uploads/preview/hd-profile-user-round-blue-icon-symbol-transparent-png-701751695033492ww0i0raud4.png"
                        alt="User avatar"
                        >
                        {%else%}
                        <img
                        class="h-10 w-10 rounded-full border-2 border-gray-200 hover:border-indigo-300 transition-colors duration-200"
                        src="https://imgs.search.brave.com/7UxJPbaQOMMN2aNH-FYPDSkQM_wiOCkUhgvTydj4mJ0/rs:fit:860:0:0:0/g:ce/aHR0cHM6Ly9zdGF0/aWMudmVjdGVlenku/Y29tL3N5c3RlbS9y/ZXNvdXJjZXMvdGh1/bWJuYWlscy8wMjYv/NDE4LzgwOC9zbWFs/bC9tYW4taGVhZC11/c2VyLXByb2ZpbGUt/Y2hhcmFjdGVyLWZy/ZWUtcG5nLnBuZw"
                        alt="User avatar"
                        >
                        {%endif%}
                        <i class="fas fa-chevron-down ml-1 text-gray-400 text-xs"></i>
                    </button>

                    <!-- Dropdown menu -->
                     {%if not user.is_authenticated %}
                    <div id="userMenu"
                        class="hidden absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-xl py-2 z-50 border border-gray-200 transform transition-all duration-200 ease-in-out">
                        <a href="{% url 'login' %}" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 hover:text-indigo-600 transition-colors duration-200">
                            <i class="fas fa-sign-in-alt mr-2"></i>Login
                        </a>
                        <a href="{% url 'register' %}" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 hover:text-indigo-600 transition-colors duration-200">
                            <i class="fas fa-user-plus mr-2"></i>Register
                        </a>
                    </div>
                    {%else%}
                    <div id="userMenu"
                        class="hidden absolute right-0 mt-2 w-100 bg-white rounded-lg shadow-xl py-1 z-50 border border-gray-200 transform transition-all duration-200 ease-in-out">
                        <div class="px-4 py-3 border-b border-gray-100">
                            <p class="text-sm font-semibold text-gray-900">{{ user.username }}</p>
                            <p class="text-xs text-gray-500">Welcome back!</p>
                        </div>
                        <a href="{% url 'home' %}" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 hover:text-indigo-600 transition-colors duration-200">
                            <i class="fas fa-home mr-2"></i>Dashboard
                        </a>
                        <form method="post" action="{% url 'logout' %}" class="inline">
                            {% csrf_token %}
                            <button type="submit" class="w-full text-left block px-4 py-2 text-sm text-gray-700 hover:bg-red-50 hover:text-red-600 transition-colors duration-200">
                                <i class="fas fa-sign-out-alt mr-2"></i>Logout
                            </button>
                        </form>
                    </div>
                    {%endif%}

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </nav>
{% endblock %}